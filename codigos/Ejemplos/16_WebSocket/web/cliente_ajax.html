
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div>Cliente de datos din&aacute;micos</div>
        No. <label id="num">0</label><br>
        Valor. <label id="val">0</label>
        <br><div id="info"></div>
        <button onclick="actualiza();">Actualiza</button>
        <script>
            function actualiza() {
                var xmlhttp;
                if (window.XMLHttpRequest) {// para IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                } else {// para IE6, IE5
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                        var resp = xmlhttp.responseText;
                        document.getElementById("info").innerHTML = "<i>" + resp + "</i>";
                        muestraData(resp);
                    }
                };
                xmlhttp.open("GET", "http://localhost:7001/16_WebSocket/DataFeedServlet", true);
                xmlhttp.send();
            }
            //
            function muestraData(_data) {
                var objJson = eval("(" + _data + ")");
                document.getElementById("num").innerHTML = objJson.indice;
                document.getElementById("val").innerHTML = objJson.valor;
            }
        </script>
        <hr><br>
        <a href="index.html">inicio</a>
    </body>
</html>
